# Git Happens CTF Walkthrough (2023)

![room_banner](https://github.com/CSpanias/pentesting.io/blob/main/thm/git_happens/media/git_happens_banner.png)

## Background Information

We need to know what is a `git commit`. According to the [GitHub's official documentation](https://github.com/git-guides/git-commit):

>**git commit** creates a commit, which is like _a snapshot of your repository_. These commits are snapshots of your entire repository at specific times. Over time, **commits should tell a story of the history of your repository and how it came to be the way that it currently is**. Commits include lots of metadata in addition to the contents and message, like the author, timestamp, and more.

## CTF Process

### 1. Port-scanning with nmap

As usual let's start with an **nmap port-scanning**:
```shell
nmap -sV -T4 -open <taget-ip>
````
`-sV` Attempts to determine the version of the service running on port.  
`-T4` Aggressive (4) speeds scans; assumes you are on a reasonably fast and reliable network.    
`-open` Show only open (or possibly open) ports.   
`<target-ip>` The target machine's IP. 

![nmap_scan](https://github.com/CSpanias/pentesting.io/blob/main/thm/git_happens/media/nmap-scan.jpg)

Not much there, just an **nginx web server** on port 80! Vising the site via our browser, we see a login page:

![homepage](https://github.com/CSpanias/pentesting.io/blob/main/thm/git_happens/media/homepage.png)

### 2. Subdirectory enumeration with Nikto

We can use various tools for searching subdirectories, such as **gobuster** and **Nikto**, but let's go with Nikto this time:

![nikto_scan](https://github.com/CSpanias/pentesting.io/blob/main/thm/git_happens/media/nikto_scan.jpg)

It looks like Nikto found a **public-facing git repository**: `/.git` ! 

### 3. Git Repositories and GitTools

We can download the whole repository on our machine using [**GitTools**](https://github.com/internetwache/GitTools). We just need to:
1. Go to the desired directory and clone GitTools with `git clone https://github.com/internetwache/GitTools`.
2. Use the `gitdumber.sh` script passing the target repository and the destination directory that we want to clone it in: `gitdumber.sh http://<target-ip>/.git <dest-dir>`.

![gittools](https://github.com/CSpanias/pentesting.io/blob/main/thm/git_happens/media/git_clone.jpg)

By moving within the directory, in this case `git`, we can interact as it was our own. For instance, we can see its logs using `git log`:

![git_log](https://github.com/CSpanias/pentesting.io/blob/main/thm/git_happens/media/git_log.png)

We are interested mostly on the **commits** made on this logs, and in particularly the earlier ones, when the site was on its initial stages.

